<div class="container py-4" *ngIf="jobAd">
  <h2 class="text-center text-primary fw-semibold fs-4 mb-4">Редактиране на обява</h2>

  <!-- Success Alert -->
  <div *ngIf="successMessage" class="alert alert-success" role="alert">
    {{ successMessage }}
  </div>

  <!-- Error Alert -->
  <div *ngIf="errorMessage" class="alert alert-danger" role="alert">
    {{ errorMessage }}
  </div>

  <form (ngSubmit)="onSubmit()" #editForm="ngForm" class="row g-3">
    <div class="col-md-6">
      <label class="form-label">Заглавие</label>
      <input
        type="text"
        class="form-control"
        [(ngModel)]="jobAd.title"
        name="title"
        #titleModel="ngModel"
        required
        maxlength="128"
      />
      <div *ngIf="titleModel.invalid && titleModel.touched" class="text-danger small">
        <span *ngIf="titleModel.errors?.['maxlength']">Максимум 128 символа.</span>
      </div>
    </div>

    <div class="col-md-6">
      <label class="form-label">Фирма</label>
      <input
        type="text"
        class="form-control"
        [(ngModel)]="jobAd.companyName"
        name="companyName"
        #companyModel="ngModel"
        required
        maxlength="128"
      />
      <div *ngIf="companyModel.invalid && companyModel.touched" class="text-danger small">
        <span *ngIf="companyModel.errors?.['maxlength']">Максимум 128 символа.</span>
      </div>
    </div>

    <div class="col-12">
      <label class="form-label">Описание</label>
      <textarea
        class="form-control"
        rows="5"
        [(ngModel)]="jobAd.description"
        name="description"
        #descriptionModel="ngModel"
        required
        maxlength="1024"
      ></textarea>
      <div *ngIf="descriptionModel.invalid && descriptionModel.touched" class="text-danger small">
        <span *ngIf="descriptionModel.errors?.['maxlength']">Максимум 1024 символа.</span>
      </div>
    </div>

    <div class="col-md-4">
      <label class="form-label">Дата на публикуване</label>
      <input
        type="date"
        class="form-control"
        [(ngModel)]="jobAd.publishedOn"
        name="publishedOn"
        required
      />
    </div>

    <div class="col-md-4 d-flex align-items-end">
      <div class="form-check">
        <input
          class="form-check-input"
          type="checkbox"
          [(ngModel)]="jobAd.isOpen"
          name="isOpen"
        />
        <label class="form-check-label">Обявата е отворена</label>
      </div>
    </div>

    <div class="col-12 text-end mt-3">
      <button
        type="submit"
        class="btn btn-success px-4 rounded-pill"
        [disabled]="editForm.invalid || isSaving"
      >
        <i class="bi bi-save me-1"></i>
        {{ isSaving ? 'Запазване...' : 'Запази промените' }}
      </button>
    </div>
  </form>
</div>